@use "../mixins" as *;
@import "../base";
@import "mini-cv";

// General Styles

$background-image: url("../image/background.jpg");
$mona-color-image: url("../image/mona_color.png");
$title: "PROTOTYPE WEILUE";

* {
    transition: height 0.3s, width 0.3s;
}

*::selection {
    background-color: gray;
    color: white;
}

span,
a {
    white-space: nowrap;
}

@mixin gray-blur {
    filter: grayscale(100%) blur(3px);
}

@mixin non-gray-blur {
    filter: grayscale(0%) blur(0px);
}

#all-wrapper {
    @include dimension-viewport;
}

#content-wrapper {
    @include flex-center-items;
    @include absolute-center;
    @include dimension-fit-content;
    flex-direction: column;
    height: 100vh;
    width: 100vw;
    row-gap: 5vh;
    overflow: hidden;
}

.background-image {
    @include dimension-viewport;
    @include absolute-top-left;
    @include gray-blur;

    background-image: $background-image;
    background-size: cover;
    z-index: -1;
}

#background {
    z-index: -99;
}

// Title

#title-wrapper {
    @include dimension-fit-content;

    #title {
        @include text-center;
        $theme-color: rgb(65, 63, 63);

    
        font-size: min(4rem, 8vw);
        color: transparent;
        -webkit-text-stroke: 1px $theme-color;
        filter: drop-shadow(0px 0px 2px white);

    
        &::after {

            @include absolute-top-left;
            content: $title;
            color: $theme-color;
            animation: flow-animation 4s ease-in-out infinite;
            box-shadow: 0px 0px 5px 0px white;
        }
    
        @keyframes flow-animation {
            0%,
            100% {
                clip-path: polygon(
                    0 51%,
                    10% 45%,
                    18% 39%,
                    27% 36%,
                    34% 41%,
                    40% 49%,
                    47% 55%,
                    56% 56%,
                    66% 54%,
                    75% 52%,
                    85% 52%,
                    94% 54%,
                    100% 55%,
                    100% 100%,
                    0% 100%
                );
            }
        
            50% {
                clip-path: polygon(
                    0 34%,
                    6% 42%,
                    13% 49%,
                    22% 55%,
                    33% 53%,
                    43% 48%,
                    53% 40%,
                    62% 34%,
                    72% 35%,
                    80% 40%,
                    87% 47%,
                    94% 53%,
                    100% 56%,
                    100% 100%,
                    0% 100%
                );
            }
        }
    }
}

// List

#list {
    height: 25rem;
    width: fit-content;
    color: black;

    @include flex-space-around-center;
    flex-direction: column;
}

// List Items

// Background Cube
.background-cube {
    @include dimension-fill;
    position: relative;
    transform-style: preserve-3d;
}

.background-image-container {
    @include dimension-fill;
    @include absolute-center;
    overflow: hidden;
}

// CV
@for $j from 1 through 3 {
    .background-image-container:nth-of-type(#{$j}) {
        .mini-cv {
            opacity: 0;
            transform: rotateZ(180deg);
        
            .human {
                bottom: -100%;
            }
        
            @for $i from 1 through 5 {
                .details .line:nth-of-type(#{$i}) {
                    @if random() > 0.5 {
                        left: 100%;
                    } @else {
                        left: -100%;
                    }
                }
            }
        
            @for $i from 1 through 7 {
                .content .line:nth-of-type(#{$i}) {
                    @if random() > 0.5 {
                        left: 100%;
                    } @else {
                        left: -100%;
                    }
                }
            }
        }
    }
}


// Waifu

#mona-svg {
    height: 100%;
    width: 100%;
}

.mona-path {
    stroke-dasharray: 74000px;
    stroke-dashoffset: 74000px;
    fill: none;
    stroke: white;
    stroke-width: 4rem;
}


// Water Curtain
.water-curtain {
    height: 100%;
    width: 100%;
    position: absolute;
    top: 0;
    left: 0;
    z-index: -1;
    -webkit-mask: url(../image/mona_color.png);
    -webkit-mask-size: 100%;
    transform: rotateY(180deg) rotateZ(180deg);

    .curtain {
        height: 100%;
        width: 120%;
        background: black;
        filter: url(#filter);
        position: absolute;
        bottom: -100%;
        left: -10%;
        z-index: 1;
        opacity: 0;
    }

    .mona {
        height: 100%;
        width: 100%;
        background: url(../image/mona_color.png);
        background-size: 100%;
        position: absolute;
        top: 0;
        left: 0;
        opacity: 0;
    }
}


$list-item-width: 15rem;
$list-item-height: 3rem;

.list-item {
    
    height: $list-item-height;
    width: $list-item-width;

    @include flex-center-items;
    flex-direction: column;
    flex-wrap: wrap;
    position: relative;

    opacity: 1;
    perspective: 600px;
    transition: 
        border 0.3s,
        height 0.2s cubic-bezier(0, 0, 0, 1), 
        width 0.4s cubic-bezier(0, 0, 0, 1), 
        filter 0.3s,
        opacity 0.5s;

    * {
        pointer-events: none;
    }

    a {
        font-size: large;
        color: white;
        pointer-events: none;
        user-select: none;
    }

    .cube {
        @include dimension-fill;
        @include flex-center-items;

        position: relative;
        transform-style: preserve-3d;
        /* transform: rotateY(90deg); */
        transition: transform 0.5s;

        .cube-face {
            @include dimension-fill;
            @include absolute-center;
            @include flex-center-items;
        }

        .cube-face-front {
            transform: translate(-50%, -50%) rotateX(90deg) translateY(50%) rotateX(-90deg);
        }

        .cube-face-back {
            transform: translate(-50%, -50%) rotateX(-90deg) translateY(50%) rotateX(-90deg);
        }

        .cube-face-left {
            transform: translate(-50%, -50%) translateX(-50%) rotateY(-90deg);
        }

        .cube-face-right {
            transform: translate(-50%, -50%) translateX(50%) rotateY(90deg);
        }

        .cube-face-top {
            transform: translate(-50%, -50%) translateY(-50%) rotateX(90deg);
        }

        .cube-face-bottom {
            transform: translate(-50%, -50%) translateY(50%) rotateX(-90deg);
        }
    }
}

// List Items Hover

.list-item-hover-in {

    height: 15rem;
    width: 10rem;
    cursor: pointer;

    a {
        text-shadow: 0px 0px 5px black;
    }


    // CV Stuff
    @for $j from 1 through 3 {
        .background-image-container:nth-of-type(#{$j}) {
            .mini-cv {
                opacity: 0.3;
                transition: opacity 0.5s 0.2s;
        
                .human {
                    transition: bottom  0.7s 0.5s ease-out;
                    bottom: 0%;
                }
                
                @for $i from 1 through 5 {
                    .details .line:nth-of-type(#{$i}) {
                        transition: left random() + 0.5 + s random() + 0.5 + s;
                        left: 0%;
                    }
                }
        
                @for $i from 1 through 7 {
                    .content .line:nth-of-type(#{$i}) {
                        transition: left random() + 0.5 + s random() + 0.5 + s;
                        left: 0%;
                    }
                }
            }
        }
    }
    

    // Waifu Stuff
    #mona-svg {
        transform: rotateX(180deg);

        .mona-path {
            stroke-dashoffset: 0px;
            transition: stroke-dashoffset 2s 0.5s ease-in-out;
            animation: mona-path-animation 0.5s 2.5s forwards;
        }

        @keyframes mona-path-animation {
            to {
                stroke-width: 1rem;
                stroke: black;
            }
        }
    }

    .water-curtain {
        filter: drop-shadow(0px 5px 5px white);
        transition: filter 0.2s 4s;
        animation: drop-shadow-animation 0.0001s 4s forwards;

        @keyframes drop-shadow-animation {
            0% {
                backdrop-filter: drop-shadow(0px 5px 5px black);
            }
            100% {
                backdrop-filter: none;
            }
        }

        .curtain {
            opacity: 1;
            animation: curtain-animation 3s 1s ease-out;
        }

        .mona {
            opacity: 1;
            transition: opacity 0s 2.5s;
        }

        @keyframes curtain-animation {
            0% {
                bottom: -100%;
            }
            50%, 55% {
                bottom: 0%;
            }
            100% {
                bottom: -100%;
            }
        }
    }

    .cube {
        animation: rotate-180deg 0.5s cubic-bezier(0, 0, 0.1, 1) forwards;
        @keyframes rotate-180deg {
            0% {
                transform: rotateX(0deg);
            }
            100% {
                transform: rotateX(-180deg);
            }
        }
    }

    .background-image {
        @include non-gray-blur;
        transition: filter 1s;
    }

    .background-image-container {
        transition: 
            height 0.5s, 
            width 0.5s, 
            opacity 0.3s,
            transform 0.5s 0.2s, 
            box-shadow 0.3s 0.5s,
            border 0.5s;
        border: 1px solid white;
        transform: translate(-50%, -50%);
        box-shadow: 0px -3px 3px 0px black;
    }

    .background-image-container:nth-of-type(1) {
        transform: translate(-50%, -50%) rotateX(45deg);
        transition: transform 0.3s 0.5s;
    }

    .background-image-container:nth-of-type(2) {
        animation: move-down-2 0.3s ease-out forwards;
        animation-delay: 0.5s;

    }

    .background-image-container:nth-of-type(3) {
        animation: move-down-3 0.3s ease-out forwards;
        animation-delay: 0.5s;
    }

    @keyframes move-down-2 {
        from {
            transform: translate(-50%, -50%);
        }
        to {
            transform: translate(-50%, -50%) rotateX(45deg) rotateZ(-20deg) translateX(25%) translateZ(30px);
        }
    }

    @keyframes move-down-3 {
        from {
            transform: translate(-50%, -50%) ;
        }
        to {
            transform: translate(-50%, -50%) rotateX(45deg)  rotateZ(20deg) translateX(-25%) translateZ(50px);
        }
    }
}

.list-item-hover-in-siblings {
    opacity: 0;
}

.list-item-hover-out {
    .cube {
        animation: rotate-180deg-reverse 0.5s forwards;
    }
    @keyframes rotate-180deg-reverse {
        0% {
            transform: rotateX(-180deg);
        }
        100% {
            transform: rotateX(0deg);
        }
    }
}

.list-item-mouse-down {
    .background-cube {
        transform: translateY(-10px);
        transition: transform 0.05s;
    }
}